import{a as A,b as z,c as G,d as N}from"./chunk-PMXNWYHP.js";import{a as F,b as D}from"./chunk-LTRGPJL6.js";import{A as j,h as $,o as k,r as B,s as L}from"./chunk-WBFAAUDI.js";import{Ab as g,Bb as T,Cb as _,Da as x,Db as C,Ma as p,Na as h,Vb as I,Wb as O,bb as y,db as m,gb as P,hb as W,ib as E,jb as S,kb as i,la as u,lb as r,mb as w,pb as f,qb as M,vb as o,wb as v,xb as b}from"./chunk-VF5V53OG.js";function J(n,e){if(n&1&&(i(0,"div",0)(1,"div"),o(2),r(),i(3,"div",1),w(4,"app-car-image",2),r(),i(5,"div"),o(6),r(),i(7,"div"),o(8),r(),i(9,"div"),o(10),r()()),n&2){let l=M();p(2),v(l.winner.id),p(2),m("car",l.car),p(2),v(l.car.name),p(2),v(l.winner.wins),p(2),v(l.winner.time)}}var q=(()=>{let e=class e{constructor(t){this.service=t}ngOnInit(){this.service.getCarById(this.winner.id).subscribe(t=>this.car=t)}};e.\u0275fac=function(a){return new(a||e)(h(j))},e.\u0275cmp=u({type:e,selectors:[["app-winner"]],inputs:{winner:"winner"},standalone:!0,features:[g],decls:1,vars:1,consts:[[1,"winner-container"],[1,"car-image"],[3,"car"]],template:function(a,s){a&1&&y(0,J,11,5,"div",0),a&2&&P(0,s.winner&&s.winner.id&&s.car?0:-1)},dependencies:[D],styles:[".winner-container[_ngcontent-%COMP%]{width:100%;display:flex}.winner-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{flex:1;text-align:center;display:flex;justify-content:center;align-items:center}app-car-image[_ngcontent-%COMP%]{width:50px;height:50px}"]});let n=e;return n})();function K(n,e){if(n&1&&w(0,"app-winner",4),n&2){let l=e.$implicit;m("winner",l)}}var H=(()=>{let e=class e{constructor(){this.winners=[],this.sortWinsEvent=new x}sortWins(){this.sortWinsEvent.emit("wins")}sortTime(){this.sortWinsEvent.emit("time")}};e.\u0275fac=function(a){return new(a||e)},e.\u0275cmp=u({type:e,selectors:[["app-winners-list"]],inputs:{winners:"winners"},outputs:{sortWinsEvent:"sortWinsEvent"},standalone:!0,features:[g],decls:15,vars:0,consts:[[1,"winners-container"],[1,"table-header"],[3,"click"],[1,"table-body"],[3,"winner"]],template:function(a,s){a&1&&(i(0,"div",0)(1,"div",1)(2,"div"),o(3,"Id"),r(),i(4,"div"),o(5,"Car"),r(),i(6,"div"),o(7,"Name"),r(),i(8,"div",2),f("click",function(){return s.sortWins()}),o(9,"Wins"),r(),i(10,"div",2),f("click",function(){return s.sortTime()}),o(11,"Best time (seconds)"),r()(),i(12,"div",3),E(13,K,1,1,"app-winner",4,W),r()()),a&2&&(p(13),S(s.winners))},dependencies:[q],styles:[".winners-container[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;gap:20px;padding:20px}.table-header[_ngcontent-%COMP%]{width:100%;display:flex;padding:5px;text-transform:uppercase;border-bottom:2px solid;letter-spacing:.1rem}.table-header[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{flex:1;text-align:center}.table-body[_ngcontent-%COMP%]{width:100%;padding:5px;text-transform:uppercase;border-bottom:2px solid}"]});let n=e;return n})();var R=()=>[],ue=(()=>{let e=class e{constructor(t){this.store=t}ngOnInit(){this.loadWinners()}loadWinners(){this.store.dispatch(k()),this.winners$=this.store.select(A),this.totalWinners$=this.store.select(z),this.currentPage$=this.store.select(G),this.pageSize$=this.store.select(N),this.totalWinners$.subscribe(t=>{this.calculateTotalPages(+t)})}calculateTotalPages(t){this.pageSize$.subscribe(a=>{this.totalPages=Math.ceil(t/a)})}goToPage(t){t>=1&&t<=this.totalPages&&(this.store.dispatch(B({page:t})),this.loadWinners())}sort(t){this.store.dispatch(L({sort:t})),this.loadWinners()}};e.\u0275fac=function(a){return new(a||e)(h($))},e.\u0275cmp=u({type:e,selectors:[["app-winners"]],standalone:!0,features:[g],decls:10,vars:11,consts:[[1,"wrapper"],[1,"winners-container"],[3,"sortWinsEvent","winners"],[1,"pagination-container"],[3,"pageChange","currentPage","totalPages"]],template:function(a,s){if(a&1&&(i(0,"div",0)(1,"div",1)(2,"app-winners-list",2),_(3,"async"),f("sortWinsEvent",function(d){return s.sort(d)}),r()(),i(4,"div",3)(5,"div"),o(6),_(7,"async"),r(),i(8,"app-pagination",4),_(9,"async"),f("pageChange",function(d){return s.goToPage(d)}),r()()()),a&2){let c,d;p(2),m("winners",(c=C(3,4,s.winners$))!==null&&c!==void 0?c:T(10,R)),p(4),b("Winners (",C(7,6,s.totalWinners$),")"),p(2),m("currentPage",(d=C(9,8,s.currentPage$))!==null&&d!==void 0?d:0)("totalPages",s.totalPages)}},dependencies:[O,I,F,H],styles:[".wrapper[_ngcontent-%COMP%]{width:100%;margin:0 auto;padding:20px}.pagination-container[_ngcontent-%COMP%]{width:100%;display:flex;padding:20px;justify-content:space-between;text-transform:uppercase}"]});let n=e;return n})();export{ue as WinnersComponent};
